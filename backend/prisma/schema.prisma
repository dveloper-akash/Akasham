
generator client {
  provider = "prisma-client-js"
  
}

datasource db {
  provider = "sqlite"
  url      = env("LOCAL_DATABASE_URL")
}

model User {
  // signup
  id        String   @id 
  email     String   @unique
  provider  String   @default("email")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  needsOnboarding Boolean  @default(true)
  //  onboarding
  role        Role?
  currentRole Role?
  displayName String?  
  username    String?  @unique
  phone       String?  
  avatarUrl   String?
  country     String?
  state       String?
  
  clientProfile  ClientProfile?
  editorProfile  EditorProfile?
  posts          Post[]
}


model ClientProfile {
  id         String  @id @default(uuid())
  user       User    @relation(fields: [userId], references: [id])
  userId     String  @unique
  bio  String?
  company    String?
  job        String?
  socials      Json?
}

model EditorProfile {
  id         String  @id @default(uuid())
  user       User    @relation(fields: [userId], references: [id])
  userId     String  @unique
  bio  String?
  skills     Json?
  portfolio  Json?
  socials      Json?
}

enum Role {
  CLIENT
  EDITOR
}
model Post {
  id          String   @id @default(uuid())
  client      User     @relation(fields: [clientId], references: [id])
  clientId    String
  title       String
  description String
  videoType   String
  minBudget   Int
  maxBudget   Int
  deadline    Int
  dualEdit    Boolean  @default(false)
  refLink     Json?
  applicantLimit Int

  status      PostStatus @default(DRAFT)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  //applications Application[]
  //hire         Hire?
}
enum PostStatus {
  DRAFT
  OPEN
  CLOSED
}